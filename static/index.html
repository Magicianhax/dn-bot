<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethereal Trading Dashboard</title>
    <link rel="stylesheet" href="/static/css/style.css?v=5">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="dashboard">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <svg class="logo-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/>
                    <line x1="12" y1="22" x2="12" y2="15.5"/>
                    <polyline points="22 8.5 12 15.5 2 8.5"/>
                </svg>
                <span class="logo-text">ETHEREAL</span>
                <span class="logo-badge">TRADER</span>
            </div>
            <div class="header-status">
                <div class="status-indicator" id="bot-status">
                    <span class="status-dot"></span>
                    <span class="status-text">OFFLINE</span>
                </div>
                <div class="ws-indicator" id="ws-status">
                    <span class="ws-dot"></span>
                    <span>WS</span>
                </div>
            </div>
        </header>

        <!-- Main Grid -->
        <main class="main-grid">
            <!-- Left Column: Controls & Settings -->
            <aside class="sidebar">
                <!-- Bot Controls -->
                <section class="card controls-card">
                    <h3 class="card-title">
                        <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                        </svg>
                        Bot Control
                    </h3>
                    <div class="control-buttons">
                        <button id="btn-start" class="btn btn-success">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                            START
                        </button>
                        <button id="btn-stop" class="btn btn-danger" disabled>
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="4" width="16" height="16" rx="2"/></svg>
                            STOP
                        </button>
                        <button id="btn-close-all" class="btn btn-warning">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                            CLOSE ALL
                        </button>
                    </div>
                </section>

                <!-- Settings -->
                <section class="card settings-card">
                    <h3 class="card-title">
                        <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                        Settings
                        <button class="btn-edit" id="btn-edit-settings" title="Edit Settings">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                        </button>
                    </h3>
                    <div class="settings-grid">
                        <div class="setting-item" data-setting="trading_pairs">
                            <span class="setting-label">Pairs</span>
                            <span class="setting-value" id="setting-pairs">-</span>
                        </div>
                        <div class="setting-item" data-setting="position_size">
                            <span class="setting-label">Position</span>
                            <span class="setting-value" id="setting-position">$0</span>
                        </div>
                        <div class="setting-item" data-setting="leverage">
                            <span class="setting-label">Leverage</span>
                            <span class="setting-value" id="setting-leverage">0x</span>
                        </div>
                        <div class="setting-item" data-setting="concurrent">
                            <span class="setting-label">Concurrent</span>
                            <span class="setting-value" id="setting-concurrent">2</span>
                        </div>
                        <div class="setting-item" data-setting="sltp">
                            <span class="setting-label">SL / TP</span>
                            <span class="setting-value" id="setting-sltp">0% / 0%</span>
                        </div>
                        <div class="setting-item" data-setting="hold_time">
                            <span class="setting-label">Hold Time</span>
                            <span class="setting-value" id="setting-hold">0-0m</span>
                        </div>
                        <div class="setting-item" data-setting="max_trades">
                            <span class="setting-label">Max Daily</span>
                            <span class="setting-value" id="setting-max-trades">0</span>
                        </div>
                    </div>
                </section>
            </aside>

            <!-- Center: Stats & Active Trade -->
            <section class="center-panel">
                <!-- Stats Row -->
                <div class="stats-row">
                    <div class="stat-card">
                        <div class="stat-label">Total PnL</div>
                        <div class="stat-value" id="stat-pnl">$0.00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Volume</div>
                        <div class="stat-value" id="stat-volume">$0.00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Buy Volume</div>
                        <div class="stat-value" id="stat-buy-vol">$0.00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Sell Volume</div>
                        <div class="stat-value" id="stat-sell-vol">$0.00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Trades</div>
                        <div class="stat-value" id="stat-trades">0</div>
                    </div>
                </div>

                <!-- Active Trade -->
                <div class="card active-trade-card compact">
                    <h3 class="card-title">
                        <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                        </svg>
                        Active Trade
                    </h3>
                    <div id="active-trade-content">
                        <div class="no-trade">No active trade</div>
                    </div>
                </div>

                <!-- Account Cards -->
                <div class="accounts-row">
                    <section class="card account-card-inline">
                        <div class="account-header">
                            <span class="account-name">
                                <svg class="icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                    <circle cx="12" cy="7" r="4"/>
                                </svg>
                                Account 1
                            </span>
                            <span class="balance-value" id="acc1-balance">$0.00</span>
                        </div>
                        <div class="account-positions" id="acc1-positions">
                            <div class="no-positions">No positions</div>
                        </div>
                    </section>

                    <section class="card account-card-inline">
                        <div class="account-header">
                            <span class="account-name">
                                <svg class="icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                    <circle cx="12" cy="7" r="4"/>
                                </svg>
                                Account 2
                            </span>
                            <span class="balance-value" id="acc2-balance">$0.00</span>
                        </div>
                        <div class="account-positions" id="acc2-positions">
                            <div class="no-positions">No positions</div>
                        </div>
                    </section>
                </div>

                <!-- Prices -->
                <div class="card prices-card">
                    <h3 class="card-title">
                        <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="1" x2="12" y2="23"/>
                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                        </svg>
                        Market Prices
                    </h3>
                    <div class="prices-grid" id="prices-grid">
                        <div class="price-item">
                            <span class="price-ticker">BTC</span>
                            <span class="price-value" id="price-BTCUSD">$0.00</span>
                        </div>
                        <div class="price-item">
                            <span class="price-ticker">ETH</span>
                            <span class="price-value" id="price-ETHUSD">$0.00</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Right: Trade History -->
            <aside class="history-panel">
                <div class="card history-card">
                    <h3 class="card-title">
                        <svg class="icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        Trade History
                    </h3>
                    <div class="history-list" id="history-list">
                        <div class="no-history">No trades yet</div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Live Logs -->
        <section class="logs-panel">
            <div class="logs-header">
                <span class="logs-title">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 6px;">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                    </svg>
                    Live Logs
                </span>
                <button class="btn-clear" id="btn-clear-logs">Clear</button>
            </div>
            <div class="logs-container" id="logs-container">
                <div class="log-entry log-info">Waiting for logs...</div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-info">
                <span>Ethereal Points Farmer v1.0</span>
                <span class="separator">|</span>
                <span id="last-update">Last update: -</span>
            </div>
        </footer>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settings-modal" style="display: none;">
        <div class="modal modal-large">
            <h3 class="modal-title">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 8px;">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                </svg>
                Edit Settings
            </h3>
            <div class="modal-body">
                <div class="settings-section">
                    <h4 class="section-title">Trading Pairs <span class="hint">(select pairs to trade - leverage limits shown)</span></h4>
                    <div class="pairs-grid-leverage" id="pairs-checkboxes">
                        <!-- Populated by JS with leverage info -->
                    </div>
                </div>

                <div class="settings-section">
                    <h4 class="section-title">Position Sizing</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                <input type="checkbox" id="input-use-full-balance" checked>
                                Use Full Balance
                            </label>
                            <span class="form-hint">Trade with smaller account's full balance</span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Fixed Position Size ($)</label>
                            <input type="number" class="form-input" id="input-position" min="1" step="1" placeholder="Only if not using full balance">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Concurrent Trades</label>
                            <input type="number" class="form-input" id="input-concurrent-trades" min="1" max="10" step="1">
                            <span class="form-hint">Open multiple trades with different pairs</span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Target Leverage</label>
                            <input type="number" class="form-input" id="input-leverage" min="1" max="20" step="1">
                            <span class="form-hint">Will be capped at each market's max</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Min Balance to Trade ($)</label>
                            <input type="number" class="form-input" id="input-min-balance" min="1" step="1" placeholder="Stop when below this">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h4 class="section-title">Risk Management</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Stop Loss (%)</label>
                            <input type="number" class="form-input" id="input-sl" min="0.1" max="100" step="0.1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Take Profit (%)</label>
                            <input type="number" class="form-input" id="input-tp" min="0.1" max="100" step="0.1">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h4 class="section-title">Timing</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Min Hold (minutes)</label>
                            <input type="number" class="form-input" id="input-min-hold" min="1" step="1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Max Hold (minutes)</label>
                            <input type="number" class="form-input" id="input-max-hold" min="1" step="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Min Delay (seconds)</label>
                            <input type="number" class="form-input" id="input-min-delay" min="10" step="1">
                            <span class="form-hint">Delay before opening next trade</span>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Max Delay (seconds)</label>
                            <input type="number" class="form-input" id="input-max-delay" min="10" step="1">
                            <span class="form-hint">Random between min-max</span>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h4 class="section-title">Daily Limits</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Max Daily Trades</label>
                            <input type="number" class="form-input" id="input-max-trades" min="1" step="1">
                            <span class="form-hint">Resets at midnight</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-danger" id="btn-cancel-settings">CANCEL</button>
                <button class="btn btn-success" id="btn-save-settings">SAVE SETTINGS</button>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js?v=5"></script>
</body>
</html>
